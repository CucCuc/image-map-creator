!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){return function t(e,n,r){var o,i,s=window,a="application/octet-stream",l=r||a,c=e,u=!n&&!r&&c,d=document.createElement("a"),h=function(t){return String(t)},f=s.Blob||s.MozBlob||s.WebKitBlob||h,p=n||"download";if(f=f.call?f.bind(s):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var b=new XMLHttpRequest;return b.open("GET",u,!0),b.responseType="blob",b.onload=function(e){t(e.target.response,p,a)},setTimeout(function(){b.send()},0),b}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&f!==h))return navigator.msSaveBlob?navigator.msSaveBlob(_(c),p):x(c);c=_(c),l=c.type||a}else if(/([\x80-\xff])/.test(c)){for(var g=0,v=new Uint8Array(c.length),m=v.length;g<m;++g)v[g]=c.charCodeAt(g);c=new f([v],{type:l})}function _(t){for(var e=t.split(/[:;,]/),n=e[1],r="base64"==e[2]?atob:decodeURIComponent,o=r(e.pop()),i=o.length,s=0,a=new Uint8Array(i);s<i;++s)a[s]=o.charCodeAt(s);return new f([a],{type:n})}function x(t,e){if("download"in d)return d.href=t,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(o=c instanceof f?c:new f([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(s.URL)x(s.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===h)try{return x("data:"+l+";base64,"+s.btoa(o))}catch(t){return x("data:"+l+","+encodeURIComponent(o))}(i=new FileReader).onload=function(t){x(this.result)},i.readAsDataURL(o)}return!0}})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){var r;!function(){"use strict";var o=function(){var t,e,n=[],r=-1,o=0,i=!1;return e=function(t,e){return t&&"function"==typeof t[e]?(i=!0,t[e](),i=!1,this):this},{add:function(e){return i?this:(n.splice(r+1,n.length-r),n.push(e),o&&n.length>o&&function(t,e,n){t.splice(e,!n||1+n-e+(!(n<0^e>=0)&&(n<0||-1)*t.length)),t.length}(n,0,-(o+1)),r=n.length-1,t&&t(),this)},setCallback:function(e){t=e},undo:function(){var o=n[r];return o?(e(o,"undo"),r-=1,t&&t(),this):this},redo:function(){var o=n[r+1];return o?(e(o,"redo"),r+=1,t&&t(),this):this},clear:function(){var e=n.length;n=[],r=-1,t&&e>0&&t()},hasUndo:function(){return-1!==r},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getIndex:function(){return r},setLimit:function(t){o=t}}};void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){!function(){function e(t,e){var n=r("div",null,"qs_label",e);return n.innerHTML=t,n}function n(t,e,n,o){var i=r("input",e,n,o);return i.type=t,i}function r(t,e,n,r){var o=document.createElement(t);if(o)return o.id=e,n&&(o.className=n),r&&r.appendChild(o),o}function o(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var i=!1,s=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",a={_version:"2.1",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){i=!0},create:function(t,e,n,r){var o=Object.create(this);return o._init(t,e,n,r),o},destroy:function(){for(var t in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[t]=null},_init:function(t,e,n,r){i||function(){var t=document.createElement("style");t.innerText=s,document.head.appendChild(t),i=!0}(),this._bindHandlers(),this._createPanel(t,e,r),this._createTitleBar(n||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(t){var e={};for(var n in this._controls)this._controls[n].getValue&&(e[n]=this._controls[n].getValue());return t&&(e=JSON.stringify(e)),e},setValuesFromJSON:function(t){for(var e in"string"==typeof t&&(t=JSON.parse(t)),t)this._controls[e].setValue&&this._controls[e].setValue(t[e]);return this},saveInLocalStorage:function(t){return this._localStorageName=t,this._readFromLocalStorage(t),this},clearLocalStorage:function(t){return localStorage.removeItem(t),this},_saveInLocalStorage:function(t){localStorage.setItem(t,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(t){var e=localStorage.getItem(t);e&&this.setValuesFromJSON(e)},_createPanel:function(t,e,n){this._panel=r("div",null,"qs_main",n||document.body),this._panel.style.zIndex=++a._topZ,this.setPosition(t||0,e||0),this._controls={}},_createTitleBar:function(t){this._titleBar=r("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=t,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=r("div",null,"qs_content",this._panel)},_createContainer:function(){var t=r("div",null,"qs_container");return t.addEventListener("focus",function(){this.className+=" qs_container_selected"},!0),t.addEventListener("blur",function(){var t=this.className.indexOf(" qs_container_selected");t>-1&&(this.className=this.className.substr(0,t))},!0),this._content.appendChild(t),t},setPosition:function(t,e){return this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px",this},setSize:function(t,e){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setWidth:function(t){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this},setHeight:function(t){return this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setDraggable:function(t){return this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(t){this._draggable&&(this._panel.style.zIndex=++a._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=t.clientX,this._startY=t.clientY),t.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),n=parseInt(this._panel.style.top),r=t.clientX,o=t.clientY;this.setPosition(e+r-this._startX,n+o-this._startY),this._startX=r,this._startY=o,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},setGlobalChangeHandler:function(t){return this._globalChangeHandler=t,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++a._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(t){return this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(t){return this._keyCode=t.toUpperCase().charCodeAt(0),document.body.addEventListener("keyup",this.onKeyUp),this},_onKeyUp:function(t){t.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;return e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null,this},enableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!1),this},disableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!0),this},hideControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="none"),this},showControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="block"),this},overrideStyle:function(t,e,n){return this._controls[t]&&(this._controls[t].control.style[e]=n),this},hideTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="none"),this},showTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="block"),this},hideAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="none")}return this},showAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="block")}return this},getValue:function(t){return this._controls[t].getValue()},setValue:function(t,e){return this._controls[t].setValue(e),this._callGCH(),this},addBoolean:function(t,e,o){var i=this._createContainer(),s=r("label",null,"qs_checkbox_label",i);s.textContent=t,s.setAttribute("for",t);var a=r("label",null,"qs_checkbox",i);a.setAttribute("for",t);var l=n("checkbox",t,null,a);l.checked=e,r("span",null,null,a),this._controls[t]={container:i,control:l,getValue:function(){return this.control.checked},setValue:function(t){this.control.checked=t,o&&o(t)}};var c=this;return l.addEventListener("change",function(){o&&o(l.checked),c._callGCH()}),this},bindBoolean:function(t,e,n){return this.addBoolean(t,e,function(e){n[t]=e})},addButton:function(t,e){var r=this._createContainer(),o=n("button",t,"qs_button",r);o.value=t,this._controls[t]={container:r,control:o};var i=this;return o.addEventListener("click",function(){e&&e(o),i._callGCH()}),this},addColor:function(t,i,s){if(function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("chrome")>-1||t.indexOf("firefox")>-1||t.indexOf("epiphany")>-1)&&t.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||o())return this.addText(t,i,s);var a=this._createContainer(),l=e("<b>"+t+":</b> "+i,a),c=n("color",t,"qs_color",a);c.value=i||"#ff0000";var u=r("label",null,"qs_color_label",a);u.setAttribute("for",t),u.style.backgroundColor=c.value,this._controls[t]={container:a,control:c,colorLabel:u,label:l,title:t,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,this.colorLabel.style.backgroundColor=c.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,s&&s(t)}};var d=this;return c.addEventListener("input",function(){l.innerHTML="<b>"+t+":</b> "+c.value,u.style.backgroundColor=c.value,s&&s(c.value),d._callGCH()}),this},bindColor:function(t,e,n){return this.addColor(t,e,function(e){n[t]=e})},addDate:function(t,r,i){var s;if(r instanceof Date){var a=r.getFullYear(),l=r.getMonth()+1;l<10&&(l="0"+l),s=a+"-"+l+"-"+r.getDate()}else s=r;if(o())return this.addText(t,s,i);var c=this._createContainer(),u=e("<b>"+t+"</b>",c),d=n("date",t,"qs_text_input",c);d.value=s||"",this._controls[t]={container:c,control:d,label:u,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var n=t.getFullYear(),r=t.getMonth()+1;r<10&&(r="0"+r);var o=t.getDate();o<10&&(o="0"+o),e=n+"-"+r+"-"+o}else e=t;this.control.value=e||"",i&&i(e)}};var h=this;return d.addEventListener("input",function(){i&&i(d.value),h._callGCH()}),this},bindDate:function(t,e,n){return this.addDate(t,e,function(e){n[t]=e})},addDropDown:function(t,n,o){for(var i=this._createContainer(),s=e("<b>"+t+"</b>",i),a=r("select",null,"qs_select",i),l=0;l<n.length;l++){var c=r("option");c.label=n[l],c.innerText=n[l],a.add(c)}var u=this;return a.addEventListener("change",function(){var t=a.selectedIndex,e=a.options;o&&o({index:t,value:e[t].label}),u._callGCH()}),this._controls[t]={container:i,control:a,label:s,getValue:function(){var t=this.control.selectedIndex;return{index:t,value:this.control.options[t].label}},setValue:function(t){var e;e=null!=t.index?t.index:t;var n=this.control.options;this.control.selectedIndex=e,o&&o({index:e,value:n[e].label})}},this},bindDropDown:function(t,e,n){return this.addDropDown(t,e,function(e){n[t]=e.value})},addElement:function(t,n){var r=this._createContainer(),o=e("<b>"+t+"</b>",r);return r.appendChild(n),this._controls[t]={container:r,label:o},this},addFileChooser:function(t,o,i,s){var a=this._createContainer(),l=e("<b>"+t+"</b>",a),c=n("file",t,"qs_file_chooser",a);i&&(c.accept=i);var u=r("label",null,"qs_file_chooser_label",a);u.setAttribute("for",t),u.textContent=o||"Choose a file...",this._controls[t]={container:a,control:c,label:l,getValue:function(){return this.control.files[0]}};var d=this;return c.addEventListener("change",function(){c.files&&c.files.length&&(u.textContent=c.files[0].name,s&&s(c.files[0]),d._callGCH())}),this},addHTML:function(t,n){var o=this._createContainer(),i=e("<b>"+t+":</b> ",o),s=r("div",null,null,o);return s.innerHTML=n,this._controls[t]={label:i,control:s,getValue:function(){return this.control.innerHTML},setValue:function(t){this.control.innerHTML=t}},this},addImage:function(t,n){var o=this._createContainer(),i=e("<b>"+t+"</b>",o);return img=r("img",null,"qs_image",o),img.src=n,this._controls[t]={container:o,control:img,label:i,getValue:function(){return this.control.src},setValue:function(t){this.control.src=t}},this},addRange:function(t,e,n,r,o,i){return this._addNumber("range",t,e,n,r,o,i)},addNumber:function(t,e,n,r,o,i){return this._addNumber("number",t,e,n,r,o,i)},_addNumber:function(t,r,i,s,a,l,c){var u=this._createContainer(),d=e("",u),h=n(t,r,"range"===t?"qs_range":"qs_text_input qs_number",u);h.min=i||0,h.max=s||100,h.step=l||1,h.value=a||0,d.innerHTML="<b>"+r+":</b> "+h.value,this._controls[r]={container:u,control:h,label:d,title:r,callback:c,getValue:function(){return parseFloat(this.control.value)},setValue:function(t){this.control.value=t,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,c&&c(parseFloat(t))}};var f="input";"range"===t&&o()&&(f="change");var p=this;return h.addEventListener(f,function(){d.innerHTML="<b>"+r+":</b> "+h.value,c&&c(parseFloat(h.value)),p._callGCH()}),this},bindRange:function(t,e,n,r,o,i){return this.addRange(t,e,n,r,o,function(e){i[t]=e})},bindNumber:function(t,e,n,r,o,i){return this.addNumber(t,e,n,r,o,function(e){i[t]=e})},setRangeParameters:function(t,e,n,r){return this.setNumberParameters(t,e,n,r)},setNumberParameters:function(t,e,n,r){var o=this._controls[t],i=o.control.value;return o.control.min=e,o.control.max=n,o.control.step=r,o.control.value!==i&&o.callback&&o.callback(o.control.value),this},addPassword:function(t,e,n){return this._addText("password",t,e,n)},bindPassword:function(t,e,n){return this.addPassword(t,e,function(e){n[t]=e})},addProgressBar:function(t,n,o,i){var s=this._createContainer(),a=e("",s),l=r("div",null,"qs_progress",s),c=r("div",null,"qs_progress_value",l);return c.style.width=o/n*100+"%",a.innerHTML="numbers"===i?"<b>"+t+":</b> "+o+" / "+n:"percent"===i?"<b>"+t+":</b> "+Math.round(o/n*100)+"%":"<b>"+t+"</b>",this._controls[t]={container:s,control:l,valueDiv:c,valueDisplay:i,label:a,value:o,max:n,title:t,getValue:function(){return this.value},setValue:function(t){this.value=Math.max(0,Math.min(t,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(t,e){var n=this._controls[t];return n.max=e,n.value=Math.min(n.value,n.max),n.valueDiv.style.width=n.value/n.max*100+"%","numbers"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+n.value+" / "+n.max:"percent"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+Math.round(n.value/n.max*100)+"%":n.label.innerHTML="<b>"+n.title+"</b>",this},addText:function(t,e,n){return this._addText("text",t,e,n)},_addText:function(t,o,i,s){var a,l=this._createContainer(),c=e("<b>"+o+"</b>",l);"textarea"===t?(a=r("textarea",o,"qs_textarea",l)).rows=5:a=n(t,o,"qs_text_input",l),a.value=i||"",this._controls[o]={container:l,control:a,label:c,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,s&&s(t)}};var u=this;return a.addEventListener("input",function(){s&&s(a.value),u._callGCH()}),this},bindText:function(t,e,n){return this.addText(t,e,function(e){n[t]=e})},addTextArea:function(t,e,n){return this._addText("textarea",t,e,n)},setTextAreaRows:function(t,e){return this._controls[t].control.rows=e,this},bindTextArea:function(t,e,n){return this.addTextArea(t,e,function(e){n[t]=e})},addTime:function(t,r,i){var s;if(r instanceof Date){var a=r.getHours();a<10&&(a="0"+a);var l=r.getMinutes();l<10&&(l="0"+l);var c=r.getSeconds();c<10&&(c="0"+c),s=a+":"+l+":"+c}else s=r;if(o())return this.addText(t,s,i);var u=this._createContainer(),d=e("<b>"+t+"</b>",u),h=n("time",t,"qs_text_input",u);h.value=s||"",this._controls[t]={container:u,control:h,label:d,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();r<10&&(r="0"+r);var o=t.getSeconds();o<10&&(o="0"+o),e=n+":"+r+":"+o}else e=t;this.control.value=e||"",i&&i(e)}};var f=this;return h.addEventListener("input",function(){i&&i(h.value),f._callGCH()}),this},bindTime:function(t,e,n){return this.addTime(t,e,function(e){n[t]=e})}};t.exports=a}()},function(t,e,n){"use strict";function r(t,e,n,r=!0){if(e>n){let t=e;e=n,n=t}return r?t>=e&&t<=n:t>e&&t<n}n.r(e);class o{constructor(t,e){this.set(t,e)}set(t,e){this.x=t,this.y=e}static fromObject(t){return new o(t.x,t.y)}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static swap(t,e,n){let r=t[n];t[n]=e[n],e[n]=r}isEmpty(){return!this.x&&!this.y}oneIsEmpty(){return!this.x||!this.y}sum(t){return new o(this.x+t.x,this.y+t.y)}diff(t){return new o(this.x-t.x,this.y-t.y)}invert(){return new o(-this.x,-this.y)}toString(t,e){return function(t,e){return parseFloat(t.toFixed(e))}(this[e],t)}toHtml(t){return this.toString(t,"x")+","+this.toString(t,"y")}}class i{constructor(t,e=[],n,r=0){this.setShape(t),this.setCoords(e),this.setHref(n),this.setId(r)}static fromObject(t){switch(t.shape){case"rect":return new s(t.coords.map(o.fromObject),t.href,t.id);case"circle":return new a(t.coords.map(o.fromObject),t.radius,t.href,t.id);case"poly":return new l(t.coords.map(o.fromObject),t.href,t.id);case"default":return new c(t.href);default:throw"Not an area"}}setShape(t){this.shape=t}addCoord(t,e){return this.coords.push(new o(t,e))}setCoords(t){this.coords=t}getCoords(t="default"){switch(t){case"default":default:return this.coords}}empty(){return 0==this.coords.length}copyCoords(){let t=[];return this.coords.forEach((e,n)=>{t[n]=new o(e.x,e.y)}),t}updateLastCoord(t,e){this.coords[this.coords.length-1]=new o(t,e)}move(t){let e=this.firstCoord();void 0!=e&&(this.coords[0]=e.sum(t))}isDrawable(){return this.coords.length>=1}isValidShape(){return this.isDrawable()}setHref(t){this.href=t}setId(t){this.id=t}firstCoord(){return this.coords[0]}distToFirstCoord(t,e){let n=new o(t,e);return o.dist(n,this.firstCoord())}htmlCoords(t){return this.getCoords("html").map(e=>e.toHtml(t)).join(",")}toHtml(){let t=this.htmlCoords(0);return""!=t&&(t='coords="'+t+'" '),'<area shape="'+this.shape+'" '+t+'href="'+this.href+'" alt="'+this.href+'"/>'}svgArea(){}toSvg(){return'<a xlink:href="'+this.href+'">'+this.svgArea()+"</a>"}}class s extends i{constructor(t=[],e,n){super("rect",t,e,n)}setCoords(t){super.setCoords(t.slice(0,2))}updateLastCoord(t,e){if(2==this.coords.length){let n=this.firstCoord();this.coords[1]=new o(t-n.x,e-n.y)}}isDrawable(){return 2==this.coords.length&&!this.coords[1].oneIsEmpty()}isHover(t,e){let n=this.firstCoord(),o=this.coords[1].sum(n);return r(t,n.x,o.x)&&r(e,n.y,o.y)}display(t){t.rect(this.coords[0].x,this.coords[0].y,this.coords[1].x,this.coords[1].y)}getCoords(t="default"){switch(t){case"html":let e=this.copyCoords();return e[1]=e[1].sum(e[0]),e[0].x>e[1].x&&o.swap(e[0],e[1],"x"),e[0].y>e[1].y&&o.swap(e[0],e[1],"y"),e;default:return super.getCoords(t)}}svgArea(){return'<rect x="'+this.coords[0].toString(0,"x")+'" y="'+this.coords[0].toString(0,"y")+'" width="'+this.coords[1].toString(0,"x")+'" height="'+this.coords[1].toString(0,"y")+'" />'}}class a extends i{constructor(t=[],e=0,n,r){super("circle",t,n,r),this.radius=e}getCenter(){return this.firstCoord}isValidShape(){return super.isValidShape()&&this.radius>0}isHover(t,e){let n=this.getCenter();return o.dist(new o(t,e),n)<this.radius}updateLastCoord(t,e){let n=this.getCenter();this.radius=o.dist(n,new o(t,e))}display(t){t.ellipse(this.getCenter().x,this.getCenter().y,2*this.radius)}htmlCoords(t){return this.getCenter().toHtml(t)+","+round(this.radius,t)}svgArea(){return'<circle cx="'+this.coords[0].toString(0,"x")+'" cy="'+this.coords[0].toString(0,"y")+'" r="'+round(this.radius,0)+'" />'}}class l extends i{constructor(t=[],e,n){super("poly",t,e,n)}isValidShape(){return this.coords.length>=4}isHover(t,e){let n,r=this.coords.map(t=>t.x),o=this.coords.map(t=>t.y),i=r.length-1,s=!1,a=r,l=o;for(n=0;n<r.length;n++)(l[n]<e&&l[i]>=e||l[i]<e&&l[n]>=e)&&(a[n]<=t||a[i]<=t)&&(s^=a[n]+(e-l[n])/(l[i]-l[n])*(a[i]-a[n])<t),i=n;return s}isClosable(t,e,n=5){return this.isValidShape()&&this.distToFirstCoord(t,e)<n}close(){this.coords[this.coords.length-1]=this.firstCoord()}move(t){this.coords=this.coords.map(e=>e.sum(t))}display(t){t.beginShape(),this.coords.forEach(e=>t.vertex(e.x,e.y)),t.endShape()}svgArea(){return'<polygon points="'+this.coords.map(t=>t.toString(0,"x")+","+t.toString(0,"y")).join(" ")+'" />'}}class c extends i{constructor(t){super("default",[],t),this.isDefault=!0}isDrawable(){return!0}isHover(){return!0}display(t){t.rect(0,0,t.getMap().width-1,t.getMap().height-1)}svgArea(){return'<rect x="0" y="0" width="100%" height="100%" />'}}var u=n(0),d=n.n(u),h=n(1),f=n.n(h),p=n(2),b=n.n(p);n.d(e,"imageMapCreator",function(){return g});let g=function(t,e=600,n=450){let r,u,h="rectangle",p=["rectangle","circle","polygon"],g={SetUrl:{onSelect:(t,e,n,r)=>{!function(t){let e=t.href,n=prompt("Entrez l'url vers laquelle devrait pointer cette zone",e||"http://");null!=n&&(t.setHref(n),A.add({undo:function(){t.setHref(e)},redo:function(){t.setHref(n)}}))}(r)},label:"Set url"},Delete:(t,e,n,r)=>{z(r)},MoveFront:{onSelect:(t,e,n,r)=>{I(r,1)},enabled:!0,label:"Move Forward"},MoveBack:{onSelect:(t,e,n,r)=>{I(r,-1)},enabled:!0,label:"Move Backward"}},v=new i,m=new o,_=!1,x=!1,w=new U,y=new class{constructor(t,e,n=[],r,o=!1){this.name=r,this.width=t,this.height=e,this.areas=n,this.dArea=new c,this.hasDefaultArea=o,this.lastId=0}setFromJson(t){t=JSON.parse(t);for(const e in t)if(t.hasOwnProperty(e)){let n=t[e];"areas"==e?this.areas=n.map(i.fromObject):"dArea"==e?this.dArea=i.fromObject(n):Object.keys(this).includes(e)&&(this[e]=n)}}setName(t){this.name=t.replace(/\s+/g,"")}setSize(t,e){this.width=t,this.height=e}setDefaultArea(t){this.hasDefaultArea=t}getAreas(t=!0){let e=this.areas.slice();return t&&this.hasDefaultArea&&e.unshift(this.dArea),e}addArea(t,e=!0){return e&&t.setId(this.getNewId()),this.areas.push(t),t.id}rmletea(t){let e=this.areaIndex(t);return this.areas.splice(e,1),e}moveArea(t,e){let n=this.areaIndex(t),r=this.areas[n],o=n+e;return!(o<0||o>=this.areas.length)&&(this.rmletea(t),this.insertArea(r,o),o)}popArea(){return this.areas.pop()}insertArea(t,e){this.areas.splice(e,0,t)}areaIndex(t){return this.areas.findIndex(e=>e.id==t)}isFirstArea(t){return 0==this.areaIndex(t)}isLastArea(t){return this.areaIndex(t)==this.areas.length-1}getNewId(){return this.lastId++,this.lastId}toHtml(){let t=[];return this.getAreas().forEach(e=>{e.isValidShape()&&t.push("\t"+e.toHtml())}),'<map name="'+this.name+'" id="'+this.name+'">\n'+t.reverse().join("\n")+"\n</map>"}toSvg(){let t=[];this.getAreas(!1).forEach(e=>{e.isValidShape()&&t.push("\t"+e.toSvg())});let e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" height="'+this.height+'">\n';return e+=t.reverse().join("\n"),e+="\n</svg>"}toJson(){return JSON.stringify(this)}clearAreas(){this.areas=[]}setAreas(t){this.areas=t}}(e,n),A=new f.a,C={scale:1,transX:0,transY:0},k={min:.03,max:3,sensativity:.001};function S(){return q(t.mouseX)}function D(){return L(t.mouseY)}function q(t){return(t-C.transX)/C.scale}function L(t){return(t-C.transY)/C.scale}function T(){return t.mouseX<=t.width&&t.mouseX>=0&&t.mouseY<=t.height&&t.mouseY>=0}function V(t){w.appear(),t.preventDefault()}function H(){w.disappear()}function M(e){"image"==e.type?(u=t.loadImage(e.data,e=>(function(e){C.scale=1,C.transX=0,C.transY=0;let n=t.width/e.width,r=t.height/e.height;n<C.scale&&(C.scale=n);r<C.scale&&(C.scale=r);y.setSize(e.width,e.height)})(e)),y.name||(y.setName(e.name),r.setValue("Map Name",y.name))):"json"==e.subtype&&fetch(e.data).then(t=>t.blob()).then(t=>{console.log(t);let e=new FileReader;e.onload=function(){let t=e.result;console.log(t),y.setFromJson(t)},e.readAsText(t)}),w.disappear()}function E(t,e){let n=[new o(t,e)];switch(h){case"rectangle":(v=new s(n)).addCoord(0,0);break;case"circle":v=new a(n);break;case"polygon":(v=new l(n)).addCoord(t,e)}}function O(){d()(y.toJson(),`${y.name}.map.json`,"application/json")}function B(t){y.addArea(t),A.add({undo:function(){t=y.popArea()},redo:function(){y.addArea(t,!1)}})}function z(t){let e=t.id;if(0===e)r.setValue("Default Area",!1);else{let n=y.rmletea(e);A.add({undo:function(){y.insertArea(t,n)},redo:function(){y.rmletea(e)}})}}function I(t,e){!1!==y.moveArea(t.id,e)&&A.add({undo:function(){y.moveArea(t.id,-e)},redo:function(){y.moveArea(t.id,e)}})}function N(){let t=y.getAreas(!1);y.clearAreas(),A.add({undo:function(){y.setAreas(t)},redo:function(){y.clearAreas()}})}function U(t=15){this.speed=t,this.alpha=0,this.over=!1}t.setup=function(){t.createCanvas(e,n).drop(M).dragLeave(H).dragOver(V),r=b.a.create(t.width+5,0,"Image-map Creator",t.canvas.parentElement).setDraggable(!1).addText("Map Name","",t=>{y.setName(t)}).addDropDown("Tool",["rectangle","circle","polygon","inspect","move","delete","test"],t=>{!function(t){h=t,v=new i}(t.value)}).addBoolean("Default Area",y.hasDefaultArea,t=>{!function(t){y.setDefaultArea(t),A.add({undo:function(){y.setDefaultArea(!t),r.setValue("Default Area",!t)},redo:function(){y.setDefaultArea(t),r.setValue("Default Area",t)}})}(t)}).addButton("Undo",A.undo).addButton("Redo",A.redo).addButton("Clear",N).addButton("Generate Html",function(){r.setValue("Output",y.toHtml())}).addButton("Generate Svg",function(){r.setValue("Output",y.toSvg())}).addTextArea("Output").addButton("Save",O),t.canvas.addEventListener("contextmenu",function(t){t.preventDefault()})},t.draw=function(){v.empty()||v.updateLastCoord(S(),D()),x=function(){let t=y.getAreas().reverse().find(t=>t.isHover(S(),D()));return void 0!=t&&t}(),function(){if(p.includes(h))switch(h){case"polygon":if(!v.empty()&&v.isClosable(S(),D(),5/C.scale)){t.cursor(t.HAND);break}default:t.cursor(t.CROSS)}else if(t.cursor(t.ARROW),x)switch(h){case"inspect":case"test":case"delete":t.cursor(t.HAND);break;case"move":t.cursor(t.MOVE)}}(),function(){switch(h){case"inspect":if(T()){let t=x?x.href:"none";r.setValue("Output",t)}}}(),function(){if(t.background(200),!u){t.noStroke(),t.fill(0),t.textSize(15);let e="Drag and drop an image and/or a .map.json save file here";t.text(e,t.width/6,t.height/2)}}(),t.translate(C.transX,C.transY),t.scale(C.scale),u&&t.image(u,0,0,u.width,u.height),w.display(),y.getAreas().concat([v]).forEach(e=>{!function(e){let n=t.color(255,255,255,178);"inspect"!=h&&"test"!=h||(n=t.color(255,0)),(T()&&e==x&&0==_&&("inspect"==h||"delete"==h||"move"==h)||_==e)&&(n=t.color(255,200,200,178)),t.fill(n),t.strokeWeight(1/C.scale),"inspect"==h||"test"==h?t.noStroke():t.stroke(0)}(e),e.isDrawable()&&e.display(t)})},t.getMap=function(){return y},t.mousePressed=function(){if(T()&&t.mouseButton==t.LEFT&&!ContextMenu.isOpen())switch(h){case"circle":case"rectangle":E(S(),D());break;case"polygon":v.empty()?E(S(),D()):v.isClosable(S(),D(),5/C.scale)?(v.close(),v.isValidShape()&&B(v),v=new i):v.addCoord(S(),D());break;case"move":x&&(_="default"!=x.shape&&x,m=_.firstCoord())}},t.mouseDragged=function(){if(T()&&!ContextMenu.isOpen())if(t.mouseButton==t.LEFT)switch(h){case"move":if(_){let e=new o(S()-q(t.pmouseX),D()-L(t.pmouseY));_.move(e)}}else t.mouseButton==t.CENTER&&(C.transX+=t.mouseX-t.pmouseX,C.transY+=t.mouseY-t.pmouseY)},t.mouseReleased=function(e){switch(h){case"rectangle":case"circle":v.isValidShape()&&B(v),v=new i;break;case"move":if(_){let t=_,e=t.firstCoord().diff(m);A.add({undo:function(){t.move(e.invert())},redo:function(){t.move(e)}})}}!function(e){if(T()&&x){if(t.mouseButton==t.RIGHT)return _=x,g.MoveFront.enabled=!(y.isLastArea(x.id)||"default"==x.shape),g.MoveBack.enabled=!(y.isFirstArea(x.id)||"default"==x.shape),ContextMenu.display(e,g,{position:"click",data:x}),!1;if(t.mouseButton==t.LEFT)switch(h){case"test":!function(t,e=400,n=300){window.open(t,"_blank",`width=${e},height=${n}`)}(x.href);break;case"delete":z(x)}}_=!1}(e),w.disappear()},t.mouseWheel=function(t){if(T()){!function(t){let e=C.scale+t;if(e>k.min&&e<k.max){let n=S(),r=D(),o=n*t,i=r*t;C.scale=e,C.transX-=o,C.transY-=i}}(C.scale*k.sensativity*-t.delta)}},U.prototype.appear=function(){this.over=!0},U.prototype.disappear=function(){this.over=!1},U.prototype.display=function(){this.over?this.alpha<100&&(this.alpha+=this.speed):this.alpha>0&&(this.alpha-=this.speed),t.noStroke(),t.fill(255,255,255,this.alpha),t.rect(q(0),L(0),t.width/C.scale,t.height/C.scale)}}}]));